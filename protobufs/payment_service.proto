syntax = "proto3";
package payment_service;
import "payment_repository.proto";

service PaymentService {
  rpc ProcessPayment (PaymentRequest) returns (PaymentResponse) {}
  rpc GetInvoice (InvoiceRequest) returns (InvoiceResponse) {}
  rpc GetAllUserInvoices (UserInvoicesRequest) returns (UserInvoicesResponse) {}
}

message PaymentRequest {
  string user_id = 1;
  float amount = 2;
  string currency = 3;
  repeated int32 items_id = 4;
  CardDetails card_details = 5;
}

message CardDetails {
  string card_number = 1;
  string card_expiry = 2;
  string card_cvc = 3;
}

message PaymentResponse {
  bool success = 1;
  payment_repository.InvoiceData invoice = 2;
}

message InvoiceRequest {
  int32 order_id = 1;
  string user_id = 2;
}

message InvoiceResponse {
  bool success = 1;
  payment_repository.InvoiceData invoice = 2;
}

message UserInvoicesRequest {
  string user_id = 1;
}

message UserInvoicesResponse {
  repeated payment_repository.InvoiceData invoices = 1;
}
